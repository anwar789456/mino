<div class="flex gap-6 p-8 h-full">
  <div class="flex-1 min-w-0">
    <div class="flex items-center justify-between mb-6">
      <h1 class="text-2xl font-bold text-[#0f1419]">Subscription Management</h1>
      <div class="relative">
        <svg class="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-[#9ca3af]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" /></svg>
        <input type="text" placeholder="Search subscribers, plans, or emails..." class="pl-10 pr-4 py-2 w-[280px] bg-[#f7f9fa] border border-[#eef1f4] rounded-lg text-sm outline-none focus:border-[#38a9f3]" />
      </div>
    </div>

    <div class="grid grid-cols-4 gap-4 mb-6">
      @for (stat of stats; track stat.label) {
        <div class="bg-[#f0fdf9] rounded-xl p-4 border border-[#e6f9f0]">
          <p class="text-[11px] text-[#9ca3af] mb-1">{{ stat.label }}</p>
          <p class="text-2xl font-bold {{ stat.valueColor }}">{{ stat.value }}</p>
          <p class="text-[11px] {{ stat.subColor }} mt-1">{{ stat.sub }}</p>
        </div>
      }
    </div>

    <div class="bg-white rounded-2xl border border-[#eef1f4] p-6">
      <div class="flex items-center justify-between mb-4">
        <div class="flex gap-1 border-b border-[#eef1f4]">
          @for (tab of tabs; track tab) {
            <button
              (click)="activeTab = tab"
              class="px-4 py-2.5 text-sm font-medium transition-colors border-b-2 -mb-[1px]"
              [class.border-[#38a9f3]]="activeTab === tab"
              [class.text-[#0f1419]]="activeTab === tab"
              [class.border-transparent]="activeTab !== tab"
              [class.text-[#9ca3af]]="activeTab !== tab"
            >{{ tab }}</button>
          }
        </div>
        <div class="flex gap-2">
          <button class="flex items-center gap-1.5 px-3 py-2 text-sm text-[#536471] border border-[#eef1f4] rounded-lg hover:bg-[#f7f9fa]">
            <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3" /></svg>
            Export
          </button>
          <button class="flex items-center gap-1.5 px-4 py-2 text-sm font-semibold text-white bg-[#38a9f3] rounded-lg hover:bg-[#2196e3]">+ Create Subscription</button>
        </div>
      </div>

      <table class="w-full">
        <thead>
          <tr class="bg-[#f0fdf9]">
            <th class="text-left text-[11px] font-semibold text-[#536471] uppercase px-4 py-2.5 rounded-l-lg">Subscriber</th>
            <th class="text-left text-[11px] font-semibold text-[#536471] uppercase px-4 py-2.5">Plan</th>
            <th class="text-left text-[11px] font-semibold text-[#536471] uppercase px-4 py-2.5">Status</th>
            <th class="text-left text-[11px] font-semibold text-[#536471] uppercase px-4 py-2.5">Amount</th>
            <th class="text-left text-[11px] font-semibold text-[#536471] uppercase px-4 py-2.5">Next Billing</th>
            <th class="text-left text-[11px] font-semibold text-[#536471] uppercase px-4 py-2.5 rounded-r-lg"></th>
          </tr>
        </thead>
        <tbody>
          @for (sub of subscriptions; track sub.name) {
            <tr class="border-t border-[#f7f9fa] cursor-pointer hover:bg-[#fafcfd]" (click)="selectSub(sub)">
              <td class="px-4 py-3">
                <div class="flex items-center gap-2.5">
                  <span class="text-xl">{{ sub.avatar }}</span>
                  <div>
                    <p class="text-sm font-medium text-[#0f1419]">{{ sub.name }}</p>
                    <p class="text-[11px] text-[#9ca3af]">{{ sub.email }}</p>
                  </div>
                </div>
              </td>
              <td class="px-4 py-3">
                <span class="text-[11px] font-semibold px-2.5 py-1 rounded-full {{ sub.planColor }}">{{ sub.planIcon }} {{ sub.plan }}</span>
              </td>
              <td class="px-4 py-3">
                <span class="text-[11px] font-semibold px-2.5 py-1 rounded-full {{ sub.statusColor }}">{{ sub.status }}</span>
              </td>
              <td class="px-4 py-3 text-sm text-[#536471]">{{ sub.amount }}</td>
              <td class="px-4 py-3 text-sm" [class.text-red-500]="sub.status === 'Past Due'" [class.text-[#536471]]="sub.status !== 'Past Due'">{{ sub.billing }}</td>
              <td class="px-4 py-3 text-[#9ca3af]">
                <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 12a.75.75 0 11-1.5 0 .75.75 0 011.5 0zM12.75 12a.75.75 0 11-1.5 0 .75.75 0 011.5 0zM18.75 12a.75.75 0 11-1.5 0 .75.75 0 011.5 0z" /></svg>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>

  <!-- Right Panel -->
  @if (selectedSub) {
    <div class="w-[280px] shrink-0 bg-white rounded-2xl border border-[#eef1f4] p-6">
      <div class="flex justify-end mb-2">
        <button class="text-[#9ca3af] hover:text-[#536471]">
          <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>
        </button>
      </div>
      <div class="text-center mb-5">
        <span class="text-4xl">{{ selectedSub.avatar }}</span>
        <h3 class="text-lg font-bold text-[#0f1419] mt-2">{{ selectedSub.name }}</h3>
        <p class="text-[11px] text-[#9ca3af]">Customer since Oct 2022</p>
      </div>

      <div class="mb-5">
        <h4 class="text-[11px] font-semibold text-[#9ca3af] uppercase tracking-wide mb-2">Current Plan</h4>
        <div class="bg-[#f7f9fa] rounded-xl p-4 text-center">
          <div class="flex items-center justify-center gap-2 mb-2">
            <span class="text-[11px] font-semibold px-2.5 py-1 rounded-full {{ selectedSub.planColor }}">{{ selectedSub.plan }}</span>
            <span class="text-[11px] font-semibold px-2.5 py-1 rounded-full bg-green-100 text-green-600">Active</span>
          </div>
          <p class="text-2xl font-bold text-[#38a9f3]">$29.00 <span class="text-xs font-normal text-[#9ca3af]">/ month</span></p>
          <p class="text-[11px] text-[#9ca3af] mt-1">Next billing on Nov 24, 2023</p>
        </div>
      </div>

      <div class="mb-5">
        <h4 class="text-[11px] font-semibold text-[#9ca3af] uppercase tracking-wide mb-2">Payment Method</h4>
        <div class="flex items-center gap-3 bg-[#f7f9fa] rounded-xl p-3">
          <svg class="w-6 h-6 text-[#536471]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 002.25-2.25V6.75A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25v10.5A2.25 2.25 0 004.5 19.5z" /></svg>
          <div>
            <p class="text-xs font-medium text-[#0f1419]">Visa ending in 4242</p>
            <p class="text-[10px] text-[#9ca3af]">Expires 12/25</p>
          </div>
          <span class="text-[10px] text-[#9ca3af] ml-auto border border-[#eef1f4] rounded px-1.5 py-0.5">Default</span>
        </div>
      </div>

      <div class="mb-5">
        <h4 class="text-[11px] font-semibold text-[#9ca3af] uppercase tracking-wide mb-2">Invoice History</h4>
        <div class="space-y-2.5">
          <div class="flex items-center justify-between">
            <div><p class="text-xs text-[#0f1419]">Oct 24, 2023</p><p class="text-[10px] text-[#9ca3af]">INV-2023-001</p></div>
            <div class="text-right"><p class="text-xs font-medium text-[#0f1419]">$29.00</p><p class="text-[10px] text-green-500">Paid</p></div>
          </div>
          <div class="flex items-center justify-between">
            <div><p class="text-xs text-[#0f1419]">Sep 24, 2023</p><p class="text-[10px] text-[#9ca3af]">INV-2023-009</p></div>
            <div class="text-right"><p class="text-xs font-medium text-[#0f1419]">$29.00</p><p class="text-[10px] text-green-500">Paid</p></div>
          </div>
          <div class="flex items-center justify-between">
            <div><p class="text-xs text-[#0f1419]">Aug 24, 2023</p><p class="text-[10px] text-[#9ca3af]">INV-2023-004</p></div>
            <div class="text-right"><p class="text-xs font-medium text-[#0f1419]">$29.00</p><p class="text-[10px] text-green-500">Paid</p></div>
          </div>
        </div>
      </div>

      <div class="flex gap-2 mt-4">
        <button class="flex-1 py-2.5 text-sm font-semibold text-[#0f1419] border border-[#eef1f4] rounded-xl hover:bg-[#f7f9fa]">Cancel Sub</button>
        <button class="flex-1 py-2.5 text-sm font-semibold text-white bg-[#38a9f3] rounded-xl hover:bg-[#2196e3]">Change Plan</button>
      </div>
    </div>
  }
</div>
