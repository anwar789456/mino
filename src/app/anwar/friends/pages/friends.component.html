<div class="flex h-[calc(100vh)] bg-white">
  <!-- Left Panel: Friend List -->
  <div class="w-[320px] border-r border-gray-200 flex flex-col">
    <div class="p-5">
      <h1 class="text-xl font-bold text-[#0f1724] font-['SN_Pro'] mb-4">Messages</h1>
      <div class="relative">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" />
        </svg>
        <input type="text" placeholder="Search friends..." class="w-full pl-9 pr-4 py-2.5 bg-gray-100 rounded-lg text-sm text-gray-600 placeholder-gray-400 outline-none focus:ring-2 focus:ring-[#38a9f3]/30" />
      </div>
    </div>

    <div class="flex-1 overflow-y-auto">
      @for (friend of friends; track friend.id) {
        <div
          class="flex items-center gap-3 px-5 py-3 cursor-pointer hover:bg-gray-50 transition-colors"
          [class.bg-blue-50]="selectedFriend?.id === friend.id"
          (click)="selectFriend(friend)"
        >
          <div class="relative shrink-0">
            <div class="w-10 h-10 rounded-full overflow-hidden bg-gray-200">
              <img [src]="friend.avatar" [alt]="friend.name" class="w-full h-full object-cover" />
            </div>
            @if (friend.online) {
              <div class="absolute bottom-0 right-0 w-3 h-3 bg-[#56c416] rounded-full border-2 border-white"></div>
            }
          </div>
          <div class="flex-1 min-w-0">
            <div class="flex items-center justify-between">
              <span class="text-sm font-semibold text-[#0f1724]">{{ friend.name }}</span>
              <span class="text-xs text-gray-400">{{ friend.time }}</span>
            </div>
            <p class="text-xs text-[#38a9f3] truncate" [class.text-gray-500]="!friend.online">{{ friend.lastMessage }}</p>
          </div>
        </div>
      }
    </div>
  </div>

  <!-- Center: Chat Area -->
  <div class="flex-1 flex flex-col">
    <!-- Chat Header -->
    <div class="flex items-center justify-between px-6 py-4 border-b border-gray-200">
      <div class="flex items-center gap-3">
        <div class="w-10 h-10 rounded-full overflow-hidden bg-gray-200">
          <img [src]="selectedFriend.avatar" [alt]="selectedFriend.name" class="w-full h-full object-cover" />
        </div>
        <div>
          <h3 class="text-sm font-semibold text-[#0f1724]">{{ selectedFriend.name }}</h3>
          <span class="text-xs text-[#56c416]">Online</span>
        </div>
      </div>
      <div class="flex items-center gap-3 text-gray-400">
        <button class="hover:text-gray-600 transition-colors">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z" />
          </svg>
        </button>
        <button class="hover:text-gray-600 transition-colors">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
            <path stroke-linecap="round" d="M15.75 10.5l4.72-4.72a.75.75 0 011.28.53v11.38a.75.75 0 01-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 002.25-2.25v-9a2.25 2.25 0 00-2.25-2.25h-9A2.25 2.25 0 002.25 7.5v9a2.25 2.25 0 002.25 2.25z" />
          </svg>
        </button>
        <button class="hover:text-gray-600 transition-colors">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" />
          </svg>
        </button>
      </div>
    </div>

    <!-- Chat Messages -->
    <div class="flex-1 overflow-y-auto px-6 py-4">
      <div class="text-center mb-6">
        <span class="text-xs text-gray-400 bg-gray-100 px-3 py-1 rounded-full">Today</span>
      </div>

      @for (msg of chatMessages; track msg.id) {
        <div class="mb-4" [class.flex]="true" [class.justify-end]="msg.isMine">
          <div class="max-w-[70%]">
            <div
              class="px-4 py-3 rounded-2xl text-sm leading-relaxed"
              [class.bg-[#38a9f3]]="msg.isMine"
              [class.text-white]="msg.isMine"
              [class.bg-gray-100]="!msg.isMine"
              [class.text-[#0f1724]]="!msg.isMine"
              [class.rounded-br-md]="msg.isMine"
              [class.rounded-bl-md]="!msg.isMine"
            >
              {{ msg.text }}
            </div>
            <p class="text-xs text-gray-400 mt-1" [class.text-right]="msg.isMine">{{ msg.time }}</p>
          </div>
        </div>
      }
    </div>

    <!-- Message Input -->
    <div class="px-6 py-4 border-t border-gray-200">
      <div class="flex items-center gap-3">
        <button class="text-gray-400 hover:text-gray-600 transition-colors">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M18.375 12.739l-7.693 7.693a4.5 4.5 0 01-6.364-6.364l10.94-10.94A3 3 0 1119.5 7.372L8.552 18.32m.009-.01l-.01.01m5.699-9.941l-7.81 7.81a1.5 1.5 0 002.112 2.13" />
          </svg>
        </button>
        <div class="flex-1 relative">
          <input type="text" placeholder="Type a message..." class="w-full px-4 py-2.5 bg-gray-100 rounded-full text-sm text-gray-600 placeholder-gray-400 outline-none focus:ring-2 focus:ring-[#38a9f3]/30" />
          <button class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15.182 15.182a4.5 4.5 0 01-6.364 0M21 12a9 9 0 11-18 0 9 9 0 0118 0zM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75zm-.375 0h.008v.015h-.008V9.75zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75zm-.375 0h.008v.015h-.008V9.75z" />
            </svg>
          </button>
        </div>
        <button class="w-10 h-10 bg-[#38a9f3] rounded-full flex items-center justify-center text-white hover:bg-[#2196e3] transition-colors shrink-0">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5" />
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Right Panel -->
  <div class="w-[280px] border-l border-gray-200 p-5 flex flex-col gap-5">
    <!-- Top Bar -->
    <div class="flex items-center gap-4 text-sm">
      <div class="flex items-center gap-1.5">
        <span class="text-red-400">üè¥</span>
        <span class="font-medium text-[#0f1724]">EN</span>
      </div>
      <div class="flex items-center gap-1.5">
        <span class="text-orange-400">üî•</span>
        <span class="font-medium text-[#0f1724]">{{ user.streak }}</span>
      </div>
      <div class="flex items-center gap-1.5">
        <span class="text-[#38a9f3]">üíé</span>
        <span class="font-medium text-[#0f1724]">{{ user.xp }}</span>
      </div>
    </div>

    <!-- Friend Requests -->
    <div class="bg-white border border-gray-200 rounded-xl p-4">
      <h3 class="text-base font-bold text-[#0f1724] font-['SN_Pro'] mb-3">Friend Requests</h3>
      @for (req of friendRequests; track req.id) {
        <div class="flex items-center gap-3 py-2">
          <div class="w-9 h-9 rounded-full overflow-hidden bg-gray-200 shrink-0">
            <img [src]="req.avatar" [alt]="req.name" class="w-full h-full object-cover" />
          </div>
          <div class="flex-1 min-w-0">
            <p class="text-sm font-semibold text-[#0f1724]">{{ req.name }}</p>
            <p class="text-xs text-gray-400">{{ req.info }}</p>
          </div>
          <div class="flex items-center gap-1.5">
            <button class="w-7 h-7 rounded-full bg-[#56c416] text-white flex items-center justify-center text-xs hover:bg-[#4ab012]">‚úì</button>
            <button class="w-7 h-7 rounded-full bg-gray-200 text-gray-500 flex items-center justify-center text-xs hover:bg-gray-300">‚úï</button>
          </div>
        </div>
      }
    </div>

    <!-- Online Friends -->
    <div class="bg-white border border-gray-200 rounded-xl p-4">
      <div class="flex items-center justify-between mb-3">
        <h3 class="text-base font-bold text-[#0f1724] font-['SN_Pro']">Online Friends</h3>
        <span class="text-[#38a9f3] text-sm font-semibold cursor-pointer">View All</span>
      </div>
      @for (friend of friends; track friend.id) {
        <div class="flex items-center gap-3 py-2">
          <div class="relative shrink-0">
            <div class="w-8 h-8 rounded-full overflow-hidden bg-gray-200">
              <img [src]="friend.avatar" [alt]="friend.name" class="w-full h-full object-cover" />
            </div>
            @if (friend.online) {
              <div class="absolute bottom-0 right-0 w-2.5 h-2.5 bg-[#56c416] rounded-full border-2 border-white"></div>
            }
          </div>
          <span class="flex-1 text-sm font-medium text-[#0f1724]">{{ friend.name }}</span>
          @if (friend.status) {
            <span class="text-xs text-[#38a9f3] font-medium">{{ friend.status }}</span>
          }
        </div>
      }
    </div>

    <!-- Invite Friends -->
    <div class="bg-[#e6f6ff] rounded-xl p-4">
      <div class="flex items-center gap-3">
        <div class="w-10 h-10 bg-[#38a9f3] rounded-full flex items-center justify-center text-white shrink-0">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.374 21c-2.331 0-4.512-.645-6.374-1.766z" />
          </svg>
        </div>
        <div>
          <p class="text-sm font-bold text-[#0f1724]">Invite Friends</p>
          <p class="text-xs text-gray-500">Get 1 week of Plus for every friend who joins!</p>
        </div>
      </div>
    </div>
  </div>
</div>
