<div class="min-h-screen flex bg-[#f0f4f8]">
  <!-- Left Panel - Branding -->
  <div class="hidden lg:flex lg:w-1/2 flex-col justify-between p-12 bg-[#f0f4f8]">
    <div>
      <!-- Logo -->
      <div class="flex items-center gap-2 mb-12">
        <div class="w-8 h-8 bg-[#38a9f3] rounded-lg flex items-center justify-center">
          <svg class="w-5 h-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.697 50.697 0 0112 13.489a50.702 50.702 0 017.74-3.342" /></svg>
        </div>
        <span class="text-xl font-bold text-[#0f1419]">Minolingo</span>
      </div>

      <!-- Tagline -->
      <h1 class="text-[42px] font-extrabold text-[#0f1419] leading-tight mb-4">
        Start Your<br>Journey Today.
      </h1>
      <p class="text-[16px] text-[#536471] max-w-[380px] leading-relaxed">
        Create your account and join thousands of learners and tutors on Minolingo.
      </p>

      <!-- Illustration -->
      <div class="mt-10 w-[360px] h-[280px] bg-gradient-to-br from-[#e6f6ff] to-[#dbeafe] rounded-2xl flex items-center justify-center overflow-hidden">
        <div class="text-center">
          <div class="text-7xl mb-2">üöÄüåç</div>
          <p class="text-sm text-[#536471] font-medium">Your adventure begins here!</p>
        </div>
      </div>
    </div>

    <!-- Footer badges -->
    <div class="flex items-center gap-6 text-[13px] text-[#536471]">
      <span class="flex items-center gap-1.5">
        <svg class="w-4 h-4 text-[#38a9f3]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z" /></svg>
        Secure Platform
      </span>
      <span class="flex items-center gap-1.5">
        <svg class="w-4 h-4 text-[#38a9f3]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 21a9.004 9.004 0 008.716-6.747M12 21a9.004 9.004 0 01-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 017.843 4.582M12 3a8.997 8.997 0 00-7.843 4.582m15.686 0A11.953 11.953 0 0112 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0121 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0112 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 013 12c0-1.605.42-3.113 1.157-4.418" /></svg>
        Global Community
      </span>
    </div>
  </div>

  <!-- Right Panel - Form -->
  <div class="w-full lg:w-1/2 flex items-center justify-center px-6 py-12 bg-white">
    <div class="w-full max-w-[460px]">
      <!-- Header -->
      <div class="text-center mb-8">
        <h2 class="text-[28px] font-bold text-[#0f1419]">Create your account</h2>
        <p class="text-[14px] text-[#9ca3af] mt-1">Step {{ currentStep }} of {{ totalSteps }} ‚Äî @if (currentStep === 1) { Account details } @else { Personal info }</p>
      </div>

      <!-- Step Indicator -->
      <div class="flex items-center gap-2 mb-8">
        <div class="flex-1 h-1.5 rounded-full transition-all duration-300"
          [class.bg-[#38a9f3]]="currentStep >= 1"
          [class.bg-[#e5e7eb]]="currentStep < 1"></div>
        <div class="flex-1 h-1.5 rounded-full transition-all duration-300"
          [class.bg-[#38a9f3]]="currentStep >= 2"
          [class.bg-[#e5e7eb]]="currentStep < 2"></div>
      </div>

      <!-- Error Message -->
      @if (errorMessage) {
        <div class="flex items-center gap-3 bg-red-50 border border-red-200 text-red-700 text-[14px] px-4 py-3 rounded-xl mb-6">
          <svg class="w-5 h-5 shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z" />
          </svg>
          <span>{{ errorMessage }}</span>
        </div>
      }

      <!-- Success Message -->
      @if (successMessage) {
        <div class="flex items-center gap-3 bg-green-50 border border-green-200 text-green-700 text-[14px] px-4 py-3 rounded-xl mb-6">
          <svg class="w-5 h-5 shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          <span>{{ successMessage }}</span>
        </div>
      }

      <!-- ==================== STEP 1 ==================== -->
      @if (currentStep === 1) {
        <form (ngSubmit)="nextStep()" novalidate>
          <!-- Full Name -->
          <div class="mb-4">
            <label for="name" class="block text-[14px] font-medium text-[#0f1419] mb-1.5">Full name</label>
            <div class="relative">
              <div class="absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none">
                <svg class="w-5 h-5 text-[#9ca3af]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" />
                </svg>
              </div>
              <input
                id="name"
                type="text"
                [(ngModel)]="name"
                name="name"
                (blur)="nameTouched = true"
                placeholder="John Doe"
                class="w-full pl-11 pr-4 py-3 bg-white border rounded-xl text-[15px] text-[#0f1419] placeholder-[#c4c9cf] outline-none transition-all duration-200 focus:border-[#38a9f3] focus:ring-2 focus:ring-[#38a9f3]/20"
                [class.border-red-400]="nameError"
                [class.border-[#d1d9e0]]="!nameError"
              />
            </div>
            @if (nameError) {
              <p class="text-[12px] text-red-500 mt-1.5 ml-1">{{ nameError }}</p>
            }
          </div>

          <!-- Username -->
          <div class="mb-4">
            <label for="username" class="block text-[14px] font-medium text-[#0f1419] mb-1.5">Username</label>
            <div class="relative">
              <div class="absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none">
                <svg class="w-5 h-5 text-[#9ca3af]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 12a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zm0 0c0 1.657 1.007 3 2.25 3S21 13.657 21 12a9 9 0 10-2.636 6.364M16.5 12V8.25" />
                </svg>
              </div>
              <input
                id="username"
                type="text"
                [(ngModel)]="username"
                name="username"
                (blur)="usernameTouched = true"
                placeholder="johndoe_99"
                class="w-full pl-11 pr-4 py-3 bg-white border rounded-xl text-[15px] text-[#0f1419] placeholder-[#c4c9cf] outline-none transition-all duration-200 focus:border-[#38a9f3] focus:ring-2 focus:ring-[#38a9f3]/20"
                [class.border-red-400]="usernameError"
                [class.border-[#d1d9e0]]="!usernameError"
              />
            </div>
            @if (usernameError) {
              <p class="text-[12px] text-red-500 mt-1.5 ml-1">{{ usernameError }}</p>
            }
          </div>

          <!-- Email -->
          <div class="mb-4">
            <label for="email" class="block text-[14px] font-medium text-[#0f1419] mb-1.5">Email</label>
            <div class="relative">
              <div class="absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none">
                <svg class="w-5 h-5 text-[#9ca3af]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75" />
                </svg>
              </div>
              <input
                id="email"
                type="email"
                [(ngModel)]="email"
                name="email"
                (blur)="emailTouched = true"
                placeholder="user@minolingo.com"
                class="w-full pl-11 pr-4 py-3 bg-white border rounded-xl text-[15px] text-[#0f1419] placeholder-[#c4c9cf] outline-none transition-all duration-200 focus:border-[#38a9f3] focus:ring-2 focus:ring-[#38a9f3]/20"
                [class.border-red-400]="emailError"
                [class.border-[#d1d9e0]]="!emailError"
              />
            </div>
            @if (emailError) {
              <p class="text-[12px] text-red-500 mt-1.5 ml-1">{{ emailError }}</p>
            }
          </div>

          <!-- Password -->
          <div class="mb-4">
            <label for="password" class="block text-[14px] font-medium text-[#0f1419] mb-1.5">Password</label>
            <div class="relative">
              <div class="absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none">
                <svg class="w-5 h-5 text-[#9ca3af]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z" />
                </svg>
              </div>
              <input
                id="password"
                [type]="showPassword ? 'text' : 'password'"
                [(ngModel)]="password"
                name="password"
                (blur)="passwordTouched = true"
                placeholder="Min. 6 characters"
                class="w-full pl-11 pr-12 py-3 bg-white border rounded-xl text-[15px] text-[#0f1419] placeholder-[#c4c9cf] outline-none transition-all duration-200 focus:border-[#38a9f3] focus:ring-2 focus:ring-[#38a9f3]/20"
                [class.border-red-400]="passwordError"
                [class.border-[#d1d9e0]]="!passwordError"
              />
              <button
                type="button"
                (click)="togglePassword()"
                class="absolute inset-y-0 right-0 pr-3.5 flex items-center text-[#9ca3af] hover:text-[#536471] transition-colors"
              >
                @if (showPassword) {
                  <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88" />
                  </svg>
                } @else {
                  <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z" />
                    <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                  </svg>
                }
              </button>
            </div>
            @if (passwordError) {
              <p class="text-[12px] text-red-500 mt-1.5 ml-1">{{ passwordError }}</p>
            }
            @if (password.length > 0) {
              <div class="mt-2">
                <div class="flex items-center gap-1.5 mb-1">
                  <div class="flex-1 h-1.5 rounded-full bg-[#e5e7eb] overflow-hidden">
                    <div class="h-full rounded-full transition-all duration-300" [ngClass]="passwordStrength.color" [style.width.%]="passwordStrength.percent"></div>
                  </div>
                  <span class="text-[11px] font-semibold min-w-[52px] text-right"
                    [class.text-red-500]="passwordStrength.level === 1"
                    [class.text-orange-400]="passwordStrength.level === 2"
                    [class.text-green-500]="passwordStrength.level === 3"
                  >{{ passwordStrength.label }}</span>
                </div>
                <p class="text-[11px] text-[#9ca3af] ml-0.5">Use uppercase, lowercase, numbers & special characters.</p>
              </div>
            }
          </div>

          <!-- Confirm Password -->
          <div class="mb-6">
            <label for="confirmPassword" class="block text-[14px] font-medium text-[#0f1419] mb-1.5">Confirm password</label>
            <div class="relative">
              <div class="absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none">
                <svg class="w-5 h-5 text-[#9ca3af]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z" />
                </svg>
              </div>
              <input
                id="confirmPassword"
                [type]="showConfirmPassword ? 'text' : 'password'"
                [(ngModel)]="confirmPassword"
                name="confirmPassword"
                (blur)="confirmPasswordTouched = true"
                placeholder="Re-enter your password"
                class="w-full pl-11 pr-12 py-3 bg-white border rounded-xl text-[15px] text-[#0f1419] placeholder-[#c4c9cf] outline-none transition-all duration-200 focus:border-[#38a9f3] focus:ring-2 focus:ring-[#38a9f3]/20"
                [class.border-red-400]="confirmPasswordError"
                [class.border-[#d1d9e0]]="!confirmPasswordError"
              />
              <button
                type="button"
                (click)="toggleConfirmPassword()"
                class="absolute inset-y-0 right-0 pr-3.5 flex items-center text-[#9ca3af] hover:text-[#536471] transition-colors"
              >
                @if (showConfirmPassword) {
                  <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88" />
                  </svg>
                } @else {
                  <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z" />
                    <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                  </svg>
                }
              </button>
            </div>
            @if (confirmPasswordError) {
              <p class="text-[12px] text-red-500 mt-1.5 ml-1">{{ confirmPasswordError }}</p>
            }
          </div>

          <!-- Next Button -->
          <button
            type="submit"
            class="w-full py-3 rounded-xl text-[15px] font-semibold bg-[#38a9f3] hover:bg-[#2196e3] text-white transition-all duration-200"
          >
            Continue
          </button>
        </form>
      }

      <!-- ==================== STEP 2 ==================== -->
      @if (currentStep === 2) {
        <form (ngSubmit)="onSubmit()" novalidate>
          <!-- Role Selection -->
          <div class="mb-5">
            <label class="block text-[14px] font-medium text-[#0f1419] mb-2.5">I am a</label>
            <div class="grid grid-cols-2 gap-3">
              <button
                type="button"
                (click)="role = 'ETUDIANT'"
                class="flex flex-col items-center gap-1.5 py-4 rounded-xl border-2 text-[14px] font-medium transition-all duration-200"
                [class.border-[#38a9f3]]="role === 'ETUDIANT'"
                [class.bg-[#f0f9ff]]="role === 'ETUDIANT'"
                [class.text-[#38a9f3]]="role === 'ETUDIANT'"
                [class.border-[#d1d9e0]]="role !== 'ETUDIANT'"
                [class.text-[#536471]]="role !== 'ETUDIANT'"
                [class.hover:border-[#a8d8f8]]="role !== 'ETUDIANT'"
              >
                <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.697 50.697 0 0112 13.489a50.702 50.702 0 017.74-3.342" />
                </svg>
                Student
              </button>
              <button
                type="button"
                (click)="role = 'TUTEUR'"
                class="flex flex-col items-center gap-1.5 py-4 rounded-xl border-2 text-[14px] font-medium transition-all duration-200"
                [class.border-[#38a9f3]]="role === 'TUTEUR'"
                [class.bg-[#f0f9ff]]="role === 'TUTEUR'"
                [class.text-[#38a9f3]]="role === 'TUTEUR'"
                [class.border-[#d1d9e0]]="role !== 'TUTEUR'"
                [class.text-[#536471]]="role !== 'TUTEUR'"
                [class.hover:border-[#a8d8f8]]="role !== 'TUTEUR'"
              >
                <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z" />
                </svg>
                Tutor
              </button>
            </div>
          </div>

          <!-- Phone Number -->
          <div class="mb-4">
            <label for="numTel" class="block text-[14px] font-medium text-[#0f1419] mb-1.5">Phone number</label>
            <div class="relative">
              <div class="absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none">
                <svg class="w-5 h-5 text-[#9ca3af]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z" />
                </svg>
              </div>
              <input
                id="numTel"
                type="tel"
                [(ngModel)]="numTel"
                name="numTel"
                (blur)="numTelTouched = true"
                placeholder="+216 XX XXX XXX"
                class="w-full pl-11 pr-4 py-3 bg-white border rounded-xl text-[15px] text-[#0f1419] placeholder-[#c4c9cf] outline-none transition-all duration-200 focus:border-[#38a9f3] focus:ring-2 focus:ring-[#38a9f3]/20"
                [class.border-red-400]="numTelError"
                [class.border-[#d1d9e0]]="!numTelError"
              />
            </div>
            @if (numTelError) {
              <p class="text-[12px] text-red-500 mt-1.5 ml-1">{{ numTelError }}</p>
            }
          </div>

          <!-- Date of Birth -->
          <div class="mb-4">
            <label for="dateNaiss" class="block text-[14px] font-medium text-[#0f1419] mb-1.5">Date of birth</label>
            <div class="relative">
              <div class="absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none">
                <svg class="w-5 h-5 text-[#9ca3af]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5" />
                </svg>
              </div>
              <input
                id="dateNaiss"
                type="date"
                [(ngModel)]="dateNaiss"
                name="dateNaiss"
                (blur)="dateNaissTouched = true"
                class="w-full pl-11 pr-4 py-3 bg-white border rounded-xl text-[15px] text-[#0f1419] placeholder-[#c4c9cf] outline-none transition-all duration-200 focus:border-[#38a9f3] focus:ring-2 focus:ring-[#38a9f3]/20"
                [class.border-red-400]="dateNaissError"
                [class.border-[#d1d9e0]]="!dateNaissError"
              />
            </div>
            @if (dateNaissError) {
              <p class="text-[12px] text-red-500 mt-1.5 ml-1">{{ dateNaissError }}</p>
            }
          </div>

          <!-- TUTEUR-specific fields -->
          @if (role === 'TUTEUR') {
            <div class="border border-[#e5e7eb] rounded-xl p-4 mb-4 bg-[#fafbfc]">
              <p class="text-[13px] font-semibold text-[#536471] mb-3 flex items-center gap-1.5">
                <svg class="w-4 h-4 text-[#38a9f3]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" />
                </svg>
                Tutor Information
              </p>

              <!-- CIN -->
              <div class="mb-3">
                <label for="CIN" class="block text-[13px] font-medium text-[#0f1419] mb-1">CIN</label>
                <input
                  id="CIN"
                  type="text"
                  [(ngModel)]="CIN"
                  name="CIN"
                  (blur)="CINTouched = true"
                  placeholder="National ID number"
                  class="w-full px-3.5 py-2.5 bg-white border rounded-xl text-[14px] text-[#0f1419] placeholder-[#c4c9cf] outline-none transition-all duration-200 focus:border-[#38a9f3] focus:ring-2 focus:ring-[#38a9f3]/20"
                  [class.border-red-400]="CINError"
                  [class.border-[#d1d9e0]]="!CINError"
                />
                @if (CINError) {
                  <p class="text-[12px] text-red-500 mt-1 ml-1">{{ CINError }}</p>
                }
              </div>

              <!-- Years of Experience -->
              <div class="mb-3">
                <label for="yearsOfExperience" class="block text-[13px] font-medium text-[#0f1419] mb-1">Years of experience</label>
                <input
                  id="yearsOfExperience"
                  type="number"
                  [(ngModel)]="yearsOfExperience"
                  name="yearsOfExperience"
                  (blur)="yearsOfExperienceTouched = true"
                  placeholder="e.g. 3"
                  min="0"
                  class="w-full px-3.5 py-2.5 bg-white border rounded-xl text-[14px] text-[#0f1419] placeholder-[#c4c9cf] outline-none transition-all duration-200 focus:border-[#38a9f3] focus:ring-2 focus:ring-[#38a9f3]/20"
                  [class.border-red-400]="yearsOfExperienceError"
                  [class.border-[#d1d9e0]]="!yearsOfExperienceError"
                />
                @if (yearsOfExperienceError) {
                  <p class="text-[12px] text-red-500 mt-1 ml-1">{{ yearsOfExperienceError }}</p>
                }
              </div>

              <!-- Specialization -->
              <div>
                <label for="specialization" class="block text-[13px] font-medium text-[#0f1419] mb-1">Specialization</label>
                <input
                  id="specialization"
                  type="text"
                  [(ngModel)]="specialization"
                  name="specialization"
                  (blur)="specializationTouched = true"
                  placeholder="e.g. French, English..."
                  class="w-full px-3.5 py-2.5 bg-white border rounded-xl text-[14px] text-[#0f1419] placeholder-[#c4c9cf] outline-none transition-all duration-200 focus:border-[#38a9f3] focus:ring-2 focus:ring-[#38a9f3]/20"
                  [class.border-red-400]="specializationError"
                  [class.border-[#d1d9e0]]="!specializationError"
                />
                @if (specializationError) {
                  <p class="text-[12px] text-red-500 mt-1 ml-1">{{ specializationError }}</p>
                }
              </div>

              <!-- CV Upload -->
              <div class="mt-3">
                <label class="block text-[13px] font-medium text-[#0f1419] mb-1">CV / Resume <span class="text-[#9ca3af] font-normal">(optional)</span></label>
                @if (!cvFileName) {
                  <label for="cvInput" class="flex flex-col items-center gap-1.5 py-4 border-2 border-dashed border-[#d1d9e0] rounded-xl cursor-pointer hover:border-[#38a9f3] hover:bg-[#f0f9ff]/50 transition-all duration-200">
                    <svg class="w-6 h-6 text-[#9ca3af]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m6.75 12l-3-3m0 0l-3 3m3-3v6m-1.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" /></svg>
                    <span class="text-[12px] text-[#536471]">Click to upload CV</span>
                    <span class="text-[10px] text-[#9ca3af]">PDF, DOC, DOCX ‚Äî Max 5 MB</span>
                  </label>
                  <input id="cvInput" type="file" accept=".pdf,.doc,.docx" (change)="onCvSelected($event)" class="hidden" />
                } @else {
                  <div class="flex items-center gap-2 px-3.5 py-2.5 bg-[#f0f9ff] border border-[#38a9f3]/30 rounded-xl">
                    <svg class="w-5 h-5 text-[#38a9f3] shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" /></svg>
                    <span class="text-[13px] text-[#0f1419] font-medium truncate flex-1">{{ cvFileName }}</span>
                    <button type="button" (click)="removeCv()" class="text-[#9ca3af] hover:text-red-500 transition-colors shrink-0">
                      <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>
                    </button>
                  </div>
                }
                @if (cvError) {
                  <p class="text-[12px] text-red-500 mt-1 ml-1">{{ cvError }}</p>
                }
              </div>
            </div>
          }

          <!-- Buttons -->
          <div class="flex gap-3 mb-2">
            <button
              type="button"
              (click)="prevStep()"
              class="flex-1 py-3 rounded-xl text-[15px] font-semibold border border-[#d1d9e0] text-[#536471] hover:bg-[#f7f9fa] transition-all duration-200"
            >
              Back
            </button>
            <button
              type="submit"
              [disabled]="isLoading"
              class="flex-[2] py-3 rounded-xl text-[15px] font-semibold transition-all duration-200"
              [class.bg-[#38a9f3]]="!isLoading"
              [class.hover:bg-[#2196e3]]="!isLoading"
              [class.text-white]="!isLoading"
              [class.bg-[#a8d8f8]]="isLoading"
              [class.text-white/70]="isLoading"
              [class.cursor-not-allowed]="isLoading"
            >
              @if (isLoading) {
                <span class="inline-flex items-center gap-2">
                  <svg class="animate-spin w-5 h-5" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                  </svg>
                  Creating account...
                </span>
              } @else {
                Create account
              }
            </button>
          </div>
        </form>
      }

      <!-- Sign In Link -->
      <p class="text-center text-[14px] text-[#536471] mt-6">
        Already have an account?
        <a routerLink="/login" class="text-[#38a9f3] font-semibold hover:underline">Sign in</a>
      </p>
    </div>
  </div>
</div>
